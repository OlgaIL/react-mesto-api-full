{"version":3,"sources":["images/logo.svg","components/Header.jsx","context/CurrentUserContext.jsx","components/Card.jsx","components/Main.jsx","components/Footer.jsx","components/PopupWithForm.jsx","components/EditProfilePopup.jsx","components/EditAvatarPopup.jsx","components/AddPlacePopup.jsx","components/ImagePopup.jsx","utils/api.js","components/App.jsx","index.js"],"names":["module","exports","Header","className","src","logoMesto","alt","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","owner","_id","cardDeleteClassName","isLiked","likes","some","i","cardLikeClassName","type","title","onClick","onCardDelete","link","name","onCardClick","onCardLike","length","Main","href","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","card","key","Footer","PopupWithForm","isOpen","noValidate","onSubmit","children","value","submitText","onClose","EditProfilePopup","useState","inputValue","setInputValue","handleChange","event","target","useEffect","e","preventDefault","onUpdateUser","minLength","maxLength","required","placeholder","onChange","id","EditAvatarPopup","textInput","useRef","onUpdateAvatar","current","ref","pattern","AddPlacePopup","setTimeout","ImagePopup","api","apiData","_handleOriginalResponse","res","ok","json","Promise","reject","Error","status","this","baseUrl","headers","fetch","then","item","method","body","JSON","stringify","console","log","putLike","deleteLike","authorization","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isDeletePopupOpen","setIsDeletePopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","loadUserInfoandCards","a","getInitialUser","user","getInitialCards","data","closeAllPopups","Provider","onDeleteImg","changeLikeCardStatus","newCard","newCards","c","catch","err","deleteCard","filter","putUserInfo","createCard","putAvatarInfo","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bc57023c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.94cbab21.svg\";","import React from 'react';\r\nimport logoMesto from '../images/logo.svg';\r\n\r\nfunction Header() {\r\n\treturn (\r\n\t\t<header className=\"header\">\r\n\t\t<img src={logoMesto} className=\"header__logo\" alt=\"Место\" />\r\n\t\t</header>\r\n\t);\r\n}\r\n\r\nexport default Header;\r\n","import React  from 'react';\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport {CurrentUserContext} from '../context/CurrentUserContext';\r\n\r\nfunction Card (props) {\r\n\t\t\t\tconst currentUser = React.useContext(CurrentUserContext);\r\n\t\t/** Определяем, являемся ли мы владельцем текущей карточки */\r\n\t\tconst isOwn = props.owner._id === currentUser._id;\r\n\t\t/**  Создаём переменную, которую после зададим в `className` для кнопки удаления */\r\n\t\tconst cardDeleteClassName = (\r\n\t\t`element__delete ${isOwn ? 'element__delete' : 'element__delete_disable'}`\r\n\t\t); \r\n\r\n\t\tconst isLiked = props.likes.some(i => i._id === currentUser._id);\r\n\t\tconst cardLikeClassName  =  (\r\n\t\t\t\t`element__like${isLiked ? ' element__like_active' : ''}`\r\n\t\t\t\t);\r\n\r\n\r\n\t\tfunction handleClick () {\r\n\t\t\t\tprops.onCardClick({name: props.name, link: props.link});\r\n\t\t}\r\n\r\n\t\tfunction handleLikeClick () {\r\n\t\t\t\tprops.onCardLike(props);\r\n\t\t}\r\n\r\n\t\tfunction handleDeleteClick () {\r\n\t\t\t\tprops.onCardDelete(props);\r\n\t\t}\r\n\r\n\t\treturn(\r\n\t\t\t\t\t<li className=\"element\">\r\n\t\t\t\t\t\t\t<button type=\"button\" className={cardDeleteClassName} title=\"Удалить\" onClick={handleDeleteClick}></button>\r\n\t\t\t\t\t\t\t<img  className=\"element__image\" src={props.link} alt={props.name} onClick={handleClick} />\r\n\t\t\t\t\t\t\t<div className=\"element__name\">\r\n\t\t\t\t\t\t\t\t\t<h3 className=\"element__title\">{props.name}</h3>\r\n\t\t\t\t\t\t\t\t\t<div className=\"element__likesinfo\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className={cardLikeClassName} title=\"Нравится\" onClick={handleLikeClick}></button>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"element__likecount\">{props.likes.length}</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t)\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport Card from './Card';\r\nimport {CurrentUserContext} from '../context/CurrentUserContext';\r\n\r\nfunction Main (props) {\r\n\tconst currentUser = React.useContext(CurrentUserContext); // подписываем на контекст\r\n\t//console.log(currentUser);\r\n\treturn (\r\n\t\t<main className=\"content\">\r\n\t\t<section className=\"lead\">\r\n\t\t\t<a href=\"#\" className=\"lead__avatar-cover\" onClick = {props.onEditAvatar}>\r\n\t\t\t\t<img  alt={currentUser ? currentUser.name : ''} src={currentUser ? currentUser.avatar : ''} className=\"lead__avatar\" />\r\n\t\t\t</a>\r\n\t\t\t<div className=\"lead__profile-info\">\r\n\t\t\t\t<div className=\"lead__profile-header\">\r\n\t\t\t\t\t<h1 className=\"lead__name\">{currentUser ? currentUser.name : ''}</h1>\r\n\t\t\t\t\t<button type=\"button\" title=\"Редактировать\" className=\"lead__edit-button\" onClick={props.onEditProfile}></button>\r\n\t\t\t\t</div>\r\n\t\t\t\t\t<p className=\"lead__text\">{currentUser ? currentUser.about : ''}</p>\r\n\t\t\t</div>\r\n\t\t\t<button type=\"button\" className=\"lead__add-button\" title=\"Добавить\" onClick={props.onAddPlace}></button>\r\n\t\t</section>\r\n\r\n\t\t<section className=\"elements\">\r\n\t\t\t<ul className=\"elements__list\">\r\n\t\t\t\t{props.cards.map(card  => <Card key={card._id} {...card}  onCardClick={props.onCardClick} onCardLike ={props.onCardLike} onCardDelete={props.onCardDelete} />)}\r\n\t\t\t</ul>\r\n\t\t</section>\r\n\t\t</main>\r\n\t);\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nfunction Footer () {\r\n\treturn (\r\n\t\t<footer className=\"footer\">\r\n\t\t\t<p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n\t\t</footer>\r\n\t);\r\n}\r\nexport default Footer;\r\n\r\n\r\n\r\n","import React from 'react';\r\n\r\nfunction PopupWithForm (props) {\r\n\treturn(\r\n\t\t\t<div className={`popup popup_type_${props.name} ${props.isOpen ? 'popup_opened' : ''}`}>\r\n\t\t\t\t<div className=\"popup__container\">\r\n\t\t\t\t\t<form name={`form_type_${props.name}`} className='form' noValidate onSubmit={props.onSubmit}>\r\n\t\t\t\t\t\t<div className=\"form__edit\">\r\n\t\t\t\t\t\t\t<h2 className=\"form__title\">{props.title}</h2>\r\n\t\t\t\t\t\t\t{props.children}\r\n\t\t\t\t\t\t\t<input type=\"submit\" value={props.submitText} className=\"form__submit\"></input>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"form__close\" title=\"Закрыть\" onClick={props.onClose}></button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default PopupWithForm;\r\n\r\n\r\n","import React, {useEffect} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {CurrentUserContext} from '../context/CurrentUserContext';\r\n\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n\tconst currentUser = React.useContext(CurrentUserContext); // подписываем на контекст\r\n\t\r\n\tconst [inputValue , setInputValue] = React.useState({\r\n\t\t\tname: '',\r\n\t\t\tabout: ''\r\n\t\t});\r\n\r\n\t\tuseEffect(() => {\r\n\t\t\t\t\tsetInputValue({\r\n\t\t\t\t\t\tname : currentUser ? currentUser.name : '',\r\n\t\t\t\t\t\tabout : currentUser ? currentUser.about : ''\r\n\t\t\t\t\t});\r\n\t\t}, [currentUser]);\r\n\r\n\r\n\tfunction handleChange(event) {\r\n\t\tconst {name, value} = event.target;\r\n\t\tsetInputValue({\r\n\t\t\t...inputValue,\r\n\t\t\t[name]: value,\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tfunction handleSubmit(e) {\r\n\t\t// Запрещаем браузеру переходить по адресу формы\r\n\t\te.preventDefault();\r\n\t\t// Передаём значения управляемых компонентов во внешний обработчик\r\n\t\tprops.onUpdateUser(inputValue);\r\n\t} \r\n\r\n\r\nreturn(\r\n\t<PopupWithForm \r\n\t\tname = \"edit\"\r\n\t\ttitle = \"Редактировать профиль\"\r\n\t\tsubmitText = \"Сохранить\"\r\n\t\tonSubmit={handleSubmit}\r\n\t\tisOpen = {props.isOpen}\r\n\t\tonClose = {props.onClose}>\r\n\t\t<input value={inputValue.name} type=\"text\" className=\"form__edt-text\" name=\"name\" minLength=\"2\" maxLength=\"40\" required placeholder=\"Имя\" onChange={handleChange} />\r\n\t\t<span id=\"name-error\" className=\"form__error\"></span>\r\n\t\t<input value={inputValue.about} type=\"text\" className=\"form__edt-text\" name=\"about\" minLength=\"2\" maxLength=\"200\" required placeholder=\"О себе\" onChange={handleChange} />\r\n\t\t<span id=\"about-error\" className=\"form__error\"></span>\r\n</PopupWithForm>\r\n\r\n\t);\r\n\r\n\r\n}\r\n\r\nexport default EditProfilePopup;","import React, {useRef} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props){\r\n\tconst textInput = useRef(null);\r\n\r\n\tfunction handleSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tprops.onUpdateAvatar({\r\n\t\t\tavatar: textInput.current.value\r\n\t\t});\r\n\t}\r\n\r\n\treturn(\r\n\t\t<PopupWithForm \r\n\t\t\t\t\t\t\tname=\"avatar\" \r\n\t\t\t\t\t\t\ttitle = \"Обновить аватар\"\r\n\t\t\t\t\t\t\tsubmitText=\"Сохранить\"\r\n\t\t\t\t\t\t\tisOpen = {props.isOpen}\r\n\t\t\t\t\t\t\tonSubmit={handleSubmit}\r\n\t\t\t\t\t\t\tonClose = {props.onClose}>\r\n\t\t\t\t\t\t\t\t<input className=\"form__edt-text\" name=\"link\"  placeholder=\"Ссылка на картинку\" ref={textInput} required type=\"url\" pattern=\"https://.*\" />\r\n\t\t\t\t\t\t\t\t<span id=\"link-error\" className=\"form__error\"></span>\r\n\t\t</PopupWithForm>\r\n\t\r\n\t\t);\r\n\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup (props) {\r\n\tconst [inputValue , setInputValue] = React.useState({\r\n\t\t\tname: '',\r\n\t\t\tlink: ''\r\n\t\t});\r\n\r\n\t\t\r\n\r\n\tfunction handleChange (event) {\r\n\t\tconst {name, value} = event.target;\r\n\t\tsetInputValue({\r\n\t\t\t...inputValue,\r\n\t\t\t[name]: value,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction handleSubmit (e) {\r\n\t\t// Запрещаем браузеру переходить по адресу формы\r\n\t\te.preventDefault();\r\n\t\t// Передаём значения управляемых компонентов во внешний обработчик\r\n\t\tprops.onAddPlace(inputValue);\r\n\r\n\t\tsetTimeout(() =>{\r\n\t\t\tsetInputValue({\r\n\t\t\t\tname:'',\r\n\t\t\t\tlink:''\r\n\t\t\t});\r\n\t\t}, 3000);\r\n\t\t\r\n\t}\r\n\r\n\t\r\n\treturn(\r\n\t\t\t<PopupWithForm \r\n\t\t\tname = \"add\"\r\n\t\t\ttitle = \"Новое место\"\r\n\t\t\tsubmitText = \"Создать\"\r\n\t\t\tisOpen = {props.isOpen}\r\n\t\t\tonSubmit={handleSubmit}\r\n\t\t\tonClose = {props.onClose}>\r\n\t\t\t\t\t\t<input type=\"text\" value={inputValue.name}  className=\"form__edt-text\" name=\"name\" placeholder=\"Название\" required minLength=\"1\" maxLength=\"30\" onChange={handleChange} />\r\n\t\t\t\t\t\t<span id=\"name-error\" className=\"form__error\"></span>\r\n\t\t\t\t\t\t<input value={inputValue.link}  className=\"form__edt-text\" name=\"link\" placeholder=\"Ссылка на картинку\" required type=\"url\" pattern=\"https://.*\" onChange={handleChange} />\r\n\t\t\t\t\t\t<span id=\"link-error\" className=\"form__error\"></span>\r\n\t\t\t</PopupWithForm>\r\n\t\t\t\t\r\n\t\t);\r\n\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\n\r\nfunction ImagePopup ({isOpen, onClose, card}) {\r\n\treturn(\r\n\t\t\t<div className={`popup popup_bigimage  ${isOpen&&'popup_opened'}`}>\r\n\t\t\t\t<div className=\"popup__container popup__container_bigimage\">\r\n\t\t\t\t\t<figure className=\"popup__images\">\r\n\t\t\t\t\t\t<img className=\"popup__image\" alt={isOpen ? card.name : ''} src={isOpen ? card.link : ''} />\r\n\t\t\t\t\t\t<figcaption className=\"popup__caption\">\r\n\t\t\t\t\t\t\t{isOpen ? card.name : ''}\r\n\t\t\t\t\t\t</figcaption>\r\n\t\t\t\t\t</figure>\r\n\t\t\t\t\t<button type=\"button\" className=\"form__close\" title=\"Закрыть\" onClick={onClose}></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t)\r\n\r\n}\r\n\r\nexport default ImagePopup;\r\n"," class Api {\r\n    constructor(apiData) {\r\n        this.baseUrl = apiData.baseUrl;\r\n\t\tthis.headers = apiData.headers; /** объект */\r\n\t}\r\n\r\n\t_handleOriginalResponse = (res) => {\r\n\t\tif (!res.ok) {\r\n\t\treturn Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n\t\t}\r\n\t\treturn res.json();\r\n\t}\r\n\r\n\r\n\tgetInitialCards() {\r\n\t\treturn fetch(`${this.baseUrl}cards`, {\r\n\t\t\theaders: this.headers\r\n\t\t})\r\n\t\t\t.then(this._handleOriginalResponse);\r\n\t}\r\n\r\n\tgetInitialUser() {\r\n\t\treturn fetch(`${this.baseUrl}users/me`, {\r\n\t\t\theaders: this.headers\r\n\t\t})\r\n\t\t.then(this._handleOriginalResponse);\r\n\t}\r\n\r\n\tputUserInfo(item) {\r\n\t\treturn fetch(`${this.baseUrl}users/me`, {\r\n\t\t\tmethod: 'PATCH',\r\n\t\t\theaders: this.headers,\r\n\t\t\tbody: JSON.stringify(item)\r\n\t\t})\r\n\t\t.then(this._handleOriginalResponse);\r\n\t\t\r\n\t}\r\n\r\n\r\n\tputAvatarInfo(avatar) {\r\n\t\tconsole.log(avatar);\r\n\t\treturn fetch(`${this.baseUrl}users/me/avatar`, {\r\n\t\t\tmethod: 'PATCH',\r\n\t\t\theaders: this.headers,\r\n\t\t\tbody: JSON.stringify(avatar)\r\n\t\t})\r\n\t\t.then(this._handleOriginalResponse);\r\n\t}\r\n\r\n\r\n\tdeleteCard (id) {\r\n\t\treturn fetch(`${this.baseUrl}cards/${id}`, {\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\theaders: this.headers\r\n\t\t})\r\n\t\t.then(this._handleOriginalResponse);\r\n\t}\r\n\t\r\n\tcreateCard (item) { \r\n\t\treturn fetch(`${this.baseUrl}cards`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: this.headers,\r\n\t\t\tbody: JSON.stringify(item)\r\n\t\t})\r\n\t\t.then(this._handleOriginalResponse);\r\n\t}\r\n\t\r\n\r\n\tputLike (id) {\r\n\t\t\treturn fetch(`${this.baseUrl}cards/likes/${id}`, {\r\n\t\t\t\tmethod: 'PUT',\r\n\t\t\t\theaders: this.headers\r\n\t\t\t})\r\n\t\t\t.then(this._handleOriginalResponse);\r\n\t}\r\n\r\n\tdeleteLike (id) {\r\n\t\t\treturn fetch(`${this.baseUrl}cards/likes/${id}`, {\r\n\t\t\t\tmethod: 'DELETE',\r\n\t\t\t\theaders: this.headers\r\n\t\t\t})\r\n\t\t\t.then(this._handleOriginalResponse);\r\n\t\t}\r\n\r\n\tchangeLikeCardStatus(id, isLiked) {\r\n\t\tconst res = isLiked ? this.putLike(id) : this.deleteLike(id);\r\n\t\treturn res;\r\n\t}\r\n\r\n}\r\n\r\n\r\nconst api = new Api({\r\n\tbaseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14/',\r\n\theaders: {\r\n\t\tauthorization: 'b5b09145-9ffa-43dc-a8a7-afd53c9e00bd',\r\n\t\t'Content-Type': 'application/json'\r\n\t}\r\n});\r\n\r\n\r\nexport default api;\r\n\r\n","import React, {useEffect} from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\n\r\nimport ImagePopup from './ImagePopup';\r\nimport api from '../utils/api';\r\n\r\nimport {CurrentUserContext} from '../context/CurrentUserContext';\r\n\r\n\r\nfunction App() {\r\n\tconst [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n\tconst [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n\tconst [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n\tconst [isDeletePopupOpen, setIsDeletePopupOpen] = React.useState(false);\r\n\tconst [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\r\n\tconst [selectedCard, setSelectedCard] = React.useState(null);\r\n\tconst [currentUser, setCurrentUser] = React.useState(null);\r\n\tconst [cards, setCards] = React.useState([]);\r\n\r\n\tconst loadUserInfoandCards = async ()  => {\r\n\t\ttry{\r\n\t\t\tconst user = await api.getInitialUser();\r\n\t\t\tconst data = await api.getInitialCards();\r\n\t\t\tsetCurrentUser(user);\r\n\t\t\tsetCards(data);\r\n\t\t} catch(error) { \r\n\t\t\tconsole.log(error);\r\n\t\t} finally { \r\n\t\t\t// loader false\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tloadUserInfoandCards();\r\n\t}, []);\r\n\r\n\r\n\tfunction handleEditAvatarClick () {\r\n\t\tsetIsEditAvatarPopupOpen(true);\r\n\t}\r\n\r\n\tfunction handleEditProfileClick () {\r\n\t\tsetIsEditProfilePopupOpen(true);\r\n\t}\r\n\r\n\tfunction handleAddPlaceClick () {\r\n\t\tsetIsAddPlacePopupOpen(true);\r\n\t}\r\n\r\n\tfunction handleDeleteClick () {\r\n\t\tsetIsDeletePopupOpen(true);\r\n\t}\r\n\r\n\tfunction handleCardClick (card) {\r\n\t\tsetIsImagePopupOpen(true);\r\n\t\tsetSelectedCard(card);\r\n\t}\r\n\r\n\tfunction closeAllPopups () {\r\n\t\t\t\tsetIsEditProfilePopupOpen(false);\r\n\t\t\t\tsetIsAddPlacePopupOpen(false);\r\n\t\t\t\tsetIsEditAvatarPopupOpen(false);\r\n\t\t\t\tsetIsDeletePopupOpen(false);\r\n\t\t\t\tsetIsImagePopupOpen(false);\r\n\t\t\t\tsetSelectedCard(null);\r\n\t}\r\n\t\r\n\tfunction handleCardLike (card) {\r\n\t\t/**  Снова проверяем, есть ли уже лайк на этой карточке */\r\n\t\tconst isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\t\t\r\n\t\t/**  Отправляем запрос в API и получаем обновлённые данные карточки */\r\n\t\tapi.changeLikeCardStatus(card._id, !isLiked)\r\n\t\t.then((newCard) => {\r\n\t\t\t/** Формируем новый массив на основе имеющегося, подставляя в него новую карточку */\r\n\t\tconst newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n\t\t\t/** Обновляем стейт */\r\n\t\tsetCards(newCards);\r\n\t\t})\r\n\t\t.catch(err=>console.log(err));\r\n\t}\r\n\r\n\tfunction handleCardDelete (card) {\r\n\t\t\tapi.deleteCard(card._id)\r\n\t\t\t.then(() => {\r\n\t\t\t\tconst newCards = cards.filter(c => c._id !== card._id);\r\n\t\t\t\tsetCards(newCards);\r\n\t\t\t})\r\n\t\t\t.catch(err=>console.log(err));\r\n\t}\r\n\r\n\tfunction handleUpdateUser (user) {\r\n\t\tapi.putUserInfo(user)\r\n\t\t.then((res) => {\r\n\t\t\tsetCurrentUser(res);\r\n\t\t\tsetIsEditProfilePopupOpen(false)\r\n\t\t})\r\n\t\t.catch(err=>console.log(err));\r\n\t\t//.finally(() => setIsEditProfilePopupOpen(false));\r\n\t}\r\n\r\n\tfunction handleAddPlaceSubmit (card) {\r\n\t\tapi.createCard(card)\r\n\t\t.then((newCard) => {\r\n\t\t\tsetCards([newCard, ...cards]); \r\n\t\t\tsetIsAddPlacePopupOpen(false);\r\n\t\t})\r\n\t\t.catch(err=>console.log(err));\r\n\t}\r\n\r\n\tfunction handleUpdateAvatar (avatar) {\r\n\t\tapi.putAvatarInfo(avatar)\r\n\t\t.then((res) =>{\r\n\t\t\tsetCurrentUser(res);\r\n\t\t\tsetIsEditAvatarPopupOpen(false)\r\n\t\t})\r\n\t\t.catch(err=>console.log(err));\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t<CurrentUserContext.Provider value={currentUser}>\r\n\t\t<div className=\"App\">\r\n\t\t\t<div className=\"page\">\r\n\t\t\t\t<Header />\r\n\t\t\t\t\t\t<Main\r\n\t\t\t\t\t\t\tonEditAvatar={handleEditAvatarClick}\r\n\t\t\t\t\t\t\tonEditProfile ={handleEditProfileClick}\r\n\t\t\t\t\t\t\tonAddPlace ={handleAddPlaceClick}\r\n\t\t\t\t\t\t\tonCardClick={handleCardClick}\r\n\t\t\t\t\t\t\tonDeleteImg = {handleDeleteClick} \r\n\t\t\t\t\t\t\tcards = {cards}\r\n\t\t\t\t\t\t\tonCardLike ={handleCardLike}\r\n\t\t\t\t\t\t\tonCardDelete ={handleCardDelete} />\r\n\t\t\t\t<Footer />\r\n\t\t\t</div>\r\n\r\n\t\t\t\t<EditProfilePopup  onUpdateUser={handleUpdateUser} isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} />\r\n\t\t\t\t<AddPlacePopup  onAddPlace ={handleAddPlaceSubmit} isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} />\r\n\t\t\t\t<EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\r\n\r\n\t\t\t\t<PopupWithForm \r\n\t\t\t\t\t\t\tname =\"delete\"\r\n\t\t\t\t\t\t\ttitle = \"Вы уверены?\"\r\n\t\t\t\t\t\t\tsubmitText = \"Да\"\r\n\t\t\t\t\t\t\tisOpen = {isDeletePopupOpen}\r\n\t\t\t\t\t\t\tonClose = {closeAllPopups} />\r\n\r\n\t\t\t\t<ImagePopup \r\n\t\t\t\t\t\tisOpen = {isImagePopupOpen}\r\n\t\t\t\t\t\tonClose = {closeAllPopups}\r\n\t\t\t\t\t\tcard = {selectedCard} />\r\n\r\n\t\t</div>\r\n\t</CurrentUserContext.Provider>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}