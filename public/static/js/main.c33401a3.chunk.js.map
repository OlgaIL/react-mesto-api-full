{"version":3,"sources":["images/logo.svg","components/Header.jsx","context/CurrentUserContext.jsx","components/Card.jsx","components/Main.jsx","components/Footer.jsx","components/PopupWithForm.jsx","components/EditProfilePopup.jsx","components/EditAvatarPopup.jsx","components/AddPlacePopup.jsx","components/ImagePopup.jsx","utils/api.js","components/App.jsx","index.js"],"names":["module","exports","Header","className","src","logoMesto","alt","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","owner","_id","cardDeleteClassName","isLiked","likes","some","i","cardLikeClassName","type","title","onClick","onCardDelete","link","name","onCardClick","onCardLike","length","Main","href","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","card","key","Footer","PopupWithForm","isOpen","noValidate","onSubmit","children","value","submitText","onClose","EditProfilePopup","useState","inputValue","setInputValue","handleChange","event","target","useEffect","e","preventDefault","onUpdateUser","minLength","maxLength","required","placeholder","onChange","id","EditAvatarPopup","textInput","useRef","onUpdateAvatar","current","ref","pattern","AddPlacePopup","setTimeout","ImagePopup","api","apiData","this","baseUrl","headers","fetch","then","res","ok","json","Promise","reject","status","item","method","body","JSON","stringify","console","log","putLike","deleteLike","authorization","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isDeletePopupOpen","setIsDeletePopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","loadUserInfoandCards","a","getInitialUser","user","getInitialCards","data","closeAllPopups","Provider","onDeleteImg","changeLikeCardStatus","newCard","newCards","c","deleteCard","filter","putUserInfo","catch","err","createCard","putAvatarInfo","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c33401a3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.94cbab21.svg\";","import React from 'react';\r\nimport logoMesto from '../images/logo.svg';\r\n\r\nfunction Header() {\r\n\treturn (\r\n\t\t<header className=\"header\">\r\n\t\t<img src={logoMesto} className=\"header__logo\" alt=\"Место\" />\r\n\t\t</header>\r\n\t);\r\n}\r\n\r\nexport default Header;\r\n","import React  from 'react';\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport {CurrentUserContext} from '../context/CurrentUserContext';\r\n\r\nfunction Card (props) {\r\n\t\t\t\tconst currentUser = React.useContext(CurrentUserContext);\r\n\r\n\t\t// Определяем, являемся ли мы владельцем текущей карточки\r\n\t\tconst isOwn = props.owner._id === currentUser._id;\r\n\t\t// Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n\t\tconst cardDeleteClassName = (\r\n\t\t`element__delete ${isOwn ? 'element__delete' : 'element__delete_disable'}`\r\n\t\t); \r\n\r\n\t\tconst isLiked = props.likes.some(i => i._id === currentUser._id);\r\n\t\tconst cardLikeClassName  =  (\r\n\t\t\t\t`element__like${isLiked ? ' element__like_active' : ''}`\r\n\t\t\t\t);\r\n\r\n\r\n\t\tfunction handleClick () {\r\n\t\t\t\tprops.onCardClick({name: props.name, link: props.link});\r\n\t\t}\r\n\r\n\t\tfunction handleLikeClick () {\r\n\t\t\t\tprops.onCardLike(props);\r\n\t\t}\r\n\r\n\t\tfunction handleDeleteClick () {\r\n\t\t\t\tprops.onCardDelete(props);\r\n\t\t}\r\n\r\n\t\treturn(\r\n\t\t\t\t\t<li className=\"element\">\r\n\t\t\t\t\t\t\t<button type=\"button\" className={cardDeleteClassName} title=\"Удалить\" onClick={handleDeleteClick}></button>\r\n\t\t\t\t\t\t\t<img  className=\"element__image\" src={props.link} alt={props.name} onClick={handleClick} />\r\n\t\t\t\t\t\t\t<div className=\"element__name\">\r\n\t\t\t\t\t\t\t\t\t<h3 className=\"element__title\">{props.name}</h3>\r\n\t\t\t\t\t\t\t\t\t<div className=\"element__likesinfo\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className={cardLikeClassName} title=\"Нравится\" onClick={handleLikeClick}></button>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"element__likecount\">{props.likes.length}</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t)\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport Card from './Card';\r\nimport {CurrentUserContext} from '../context/CurrentUserContext';\r\n\r\nfunction Main (props) {\r\n\tconst currentUser = React.useContext(CurrentUserContext); // подписываем на контекст\r\n\t//console.log(currentUser);\r\n\treturn (\r\n\t\t<main className=\"content\">\r\n\t\t<section className=\"lead\">\r\n\t\t\t<a href=\"#\" className=\"lead__avatar-cover\" onClick = {props.onEditAvatar}>\r\n\t\t\t\t<img  alt={currentUser ? currentUser.name : ''} src={currentUser ? currentUser.avatar : ''} className=\"lead__avatar\" />\r\n\t\t\t</a>\r\n\t\t\t<div className=\"lead__profile-info\">\r\n\t\t\t\t<div className=\"lead__profile-header\">\r\n\t\t\t\t\t<h1 className=\"lead__name\">{currentUser ? currentUser.name : ''}</h1>\r\n\t\t\t\t\t<button type=\"button\" title=\"Редактировать\" className=\"lead__edit-button\" onClick={props.onEditProfile}></button>\r\n\t\t\t\t</div>\r\n\t\t\t\t\t<p className=\"lead__text\">{currentUser ? currentUser.about : ''}</p>\r\n\t\t\t</div>\r\n\t\t\t<button type=\"button\" className=\"lead__add-button\" title=\"Добавить\" onClick={props.onAddPlace}></button>\r\n\t\t</section>\r\n\r\n\t\t<section className=\"elements\">\r\n\t\t\t<ul className=\"elements__list\">\r\n\t\t\t\t{props.cards.map(card  => <Card key={card._id} {...card}  onCardClick={props.onCardClick} onCardLike ={props.onCardLike} onCardDelete={props.onCardDelete} />)}\r\n\t\t\t</ul>\r\n\t\t</section>\r\n\t\t</main>\r\n\t);\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nfunction Footer () {\r\n\treturn (\r\n\t\t<footer className=\"footer\">\r\n\t\t\t<p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n\t\t</footer>\r\n\t);\r\n}\r\nexport default Footer;\r\n\r\n\r\n\r\n","import React from 'react';\r\n\r\nfunction PopupWithForm (props) {\r\n\treturn(\r\n\t\t\t<div className={`popup popup_type_${props.name} ${props.isOpen ? 'popup_opened' : ''}`}>\r\n\t\t\t\t<div className=\"popup__container\">\r\n\t\t\t\t\t<form name={`form_type_${props.name}`} className='form' noValidate onSubmit={props.onSubmit}>\r\n\t\t\t\t\t\t<div className=\"form__edit\">\r\n\t\t\t\t\t\t\t<h2 className=\"form__title\">{props.title}</h2>\r\n\t\t\t\t\t\t\t{props.children}\r\n\t\t\t\t\t\t\t<input type=\"submit\" value={props.submitText} className=\"form__submit\"></input>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"form__close\" title=\"Закрыть\" onClick={props.onClose}></button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default PopupWithForm;\r\n\r\n\r\n","import React, {useEffect} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {CurrentUserContext} from '../context/CurrentUserContext';\r\n\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n\tconst currentUser = React.useContext(CurrentUserContext); // подписываем на контекст\r\n\t\r\n\tconst [inputValue , setInputValue] = React.useState({\r\n\t\t\tname: '',\r\n\t\t\tabout: ''\r\n\t\t});\r\n\r\n\t\tuseEffect(() => {\r\n\t\t\t\t\tsetInputValue({\r\n\t\t\t\t\t\tname : currentUser ? currentUser.name : '',\r\n\t\t\t\t\t\tabout : currentUser ? currentUser.about : ''\r\n\t\t\t\t\t});\r\n\t\t}, [currentUser]);\r\n\r\n\r\n\tfunction handleChange(event) {\r\n\t\tconst {name, value} = event.target;\r\n\t\tsetInputValue({\r\n\t\t\t...inputValue,\r\n\t\t\t[name]: value,\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tfunction handleSubmit(e) {\r\n\t\t// Запрещаем браузеру переходить по адресу формы\r\n\t\te.preventDefault();\r\n\t\t// Передаём значения управляемых компонентов во внешний обработчик\r\n\t\tprops.onUpdateUser(inputValue);\r\n\t} \r\n\r\n\r\nreturn(\r\n\t<PopupWithForm \r\n\t\tname = \"edit\"\r\n\t\ttitle = \"Редактировать профиль\"\r\n\t\tsubmitText = \"Сохранить\"\r\n\t\tonSubmit={handleSubmit}\r\n\t\tisOpen = {props.isOpen}\r\n\t\tonClose = {props.onClose}>\r\n\t\t<input value={inputValue.name} type=\"text\" className=\"form__edt-text\" name=\"name\" minLength=\"2\" maxLength=\"40\" required placeholder=\"Имя\" onChange={handleChange} />\r\n\t\t<span id=\"name-error\" className=\"form__error\"></span>\r\n\t\t<input value={inputValue.about} type=\"text\" className=\"form__edt-text\" name=\"about\" minLength=\"2\" maxLength=\"200\" required placeholder=\"О себе\" onChange={handleChange} />\r\n\t\t<span id=\"about-error\" className=\"form__error\"></span>\r\n</PopupWithForm>\r\n\r\n\t);\r\n\r\n\r\n}\r\n\r\nexport default EditProfilePopup;","import React, {useRef} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props){\r\n\tconst textInput = useRef(null);\r\n\r\n\tfunction handleSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tprops.onUpdateAvatar({\r\n\t\t\tavatar: textInput.current.value\r\n\t\t});\r\n\t}\r\n\r\n\treturn(\r\n\t\t<PopupWithForm \r\n\t\t\t\t\t\t\tname=\"avatar\" \r\n\t\t\t\t\t\t\ttitle = \"Обновить аватар\"\r\n\t\t\t\t\t\t\tsubmitText=\"Сохранить\"\r\n\t\t\t\t\t\t\tisOpen = {props.isOpen}\r\n\t\t\t\t\t\t\tonSubmit={handleSubmit}\r\n\t\t\t\t\t\t\tonClose = {props.onClose}>\r\n\t\t\t\t\t\t\t\t<input className=\"form__edt-text\" name=\"link\"  placeholder=\"Ссылка на картинку\" ref={textInput} required type=\"url\" pattern=\"https://.*\" />\r\n\t\t\t\t\t\t\t\t<span id=\"link-error\" className=\"form__error\"></span>\r\n\t\t</PopupWithForm>\r\n\t\r\n\t\t);\r\n\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup (props) {\r\n\tconst [inputValue , setInputValue] = React.useState({\r\n\t\t\tname: '',\r\n\t\t\tlink: ''\r\n\t\t});\r\n\r\n\t\t\r\n\r\n\tfunction handleChange (event) {\r\n\t\tconst {name, value} = event.target;\r\n\t\tsetInputValue({\r\n\t\t\t...inputValue,\r\n\t\t\t[name]: value,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction handleSubmit (e) {\r\n\t\t// Запрещаем браузеру переходить по адресу формы\r\n\t\te.preventDefault();\r\n\t\t// Передаём значения управляемых компонентов во внешний обработчик\r\n\t\tprops.onAddPlace(inputValue);\r\n\r\n\t\tsetTimeout(() =>{\r\n\t\t\tsetInputValue({\r\n\t\t\t\tname:'',\r\n\t\t\t\tlink:''\r\n\t\t\t});\r\n\t\t}, 1000);\r\n\t\t\r\n\t}\r\n\r\n\t\r\n\treturn(\r\n\t\t\t<PopupWithForm \r\n\t\t\tname = \"add\"\r\n\t\t\ttitle = \"Новое место\"\r\n\t\t\tsubmitText = \"Создать\"\r\n\t\t\tisOpen = {props.isOpen}\r\n\t\t\tonSubmit={handleSubmit}\r\n\t\t\tonClose = {props.onClose}>\r\n\t\t\t\t\t\t<input type=\"text\" value={inputValue.name}  className=\"form__edt-text\" name=\"name\" placeholder=\"Название\" required minLength=\"1\" maxLength=\"30\" onChange={handleChange} />\r\n\t\t\t\t\t\t<span id=\"name-error\" className=\"form__error\"></span>\r\n\t\t\t\t\t\t<input value={inputValue.link}  className=\"form__edt-text\" name=\"link\" placeholder=\"Ссылка на картинку\" required type=\"url\" pattern=\"https://.*\" onChange={handleChange} />\r\n\t\t\t\t\t\t<span id=\"link-error\" className=\"form__error\"></span>\r\n\t\t\t</PopupWithForm>\r\n\t\t\t\t\r\n\t\t);\r\n\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\n\r\nfunction ImagePopup ({isOpen, onClose, card}) {\r\n\treturn(\r\n\t\t\t<div className={`popup popup_bigimage  ${isOpen ? 'popup_opened' : ''}`}>\r\n\t\t\t\t<div className=\"popup__container popup__container_bigimage\">\r\n\t\t\t\t\t<figure className=\"popup__images\">\r\n\t\t\t\t\t\t<img className=\"popup__image\" alt={isOpen ? card.name : ''} src={isOpen ? card.link : ''} />\r\n\t\t\t\t\t\t<figcaption className=\"popup__caption\">\r\n\t\t\t\t\t\t\t{isOpen ? card.name : ''}\r\n\t\t\t\t\t\t</figcaption>\r\n\t\t\t\t\t</figure>\r\n\t\t\t\t\t<button type=\"button\" className=\"form__close\" title=\"Закрыть\" onClick={onClose}></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t)\r\n\r\n}\r\n\r\nexport default ImagePopup;\r\n"," class Api {\r\n    constructor(apiData) {\r\n        this.baseUrl = apiData.baseUrl;\r\n\t\tthis.headers = apiData.headers; /** объект */\r\n\t}\r\n\r\n\r\n\tgetInitialCards() {\r\n\t\treturn fetch(`${this.baseUrl}cards`, {\r\n\t\t\theaders: this.headers\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\tif (res.ok) {   return res.json(); \t}\r\n\t\t\t// если ошибка, отклоняем промис\r\n\t\t\treturn Promise.reject(`Ошибка: ${res.status}`)\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n\tgetInitialUser() {\r\n\t\treturn fetch(`${this.baseUrl}users/me`, {\r\n\t\t\theaders: this.headers\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\tif (res.ok) {   return res.json(); \t}\r\n\t\t\t// если ошибка, отклоняем промис\r\n\t\t\treturn Promise.reject(`Ошибка: ${res.status}`)\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n\tputUserInfo(item) {\r\n\t\treturn fetch(`${this.baseUrl}users/me`, {\r\n\t\t\tmethod: 'PATCH',\r\n\t\t\theaders: this.headers,\r\n\t\t\tbody: JSON.stringify(item)\r\n\t\t}\r\n\t\t)\r\n\t\t\t.then(res => {\r\n\t\t\tif (res.ok) {   return res.json(); \t}\r\n\t\t\t// если ошибка, отклоняем промис\r\n\t\t\treturn Promise.reject(`Ошибка: ${res.status}`)\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n\r\n\tputAvatarInfo(avatar) {\r\n\t\tconsole.log(avatar);\r\n\t\treturn fetch(`${this.baseUrl}users/me/avatar`, {\r\n\t\t\tmethod: 'PATCH',\r\n\t\t\theaders: this.headers,\r\n\t\t\tbody: JSON.stringify(avatar)\r\n\t\t}\t\r\n\t\t)\r\n\t\t\t.then(res => {\r\n\t\t\tif (res.ok) {   return res.json(); \t}\r\n\t\t\t// если ошибка, отклоняем промис\r\n\t\t\treturn Promise.reject(`Ошибка: ${res.status}`)\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n\r\n\tdeleteCard (id) {\r\n\t\treturn fetch(`${this.baseUrl}cards/${id}`, {\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\theaders: this.headers\r\n\t\t})\r\n\t\t.then(res => {\r\n\t\t\tif (res.ok) {\r\n\t\t\t\treturn res.json()\r\n\t\t\t}\r\n\t\treturn Promise.reject(`Ошибка: ${res.status}`)\r\n\t\t})\r\n\t\r\n\t}\r\n\t\r\n\tcreateCard (item) { \r\n\t\treturn fetch(`${this.baseUrl}cards`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: this.headers,\r\n\t\t\tbody: JSON.stringify(item)\r\n\t\t})\r\n\t\t.then(res => res.json())\r\n\t\t}\r\n\t\r\n\r\n\tputLike (id) {\r\n\t\t\treturn fetch(`${this.baseUrl}cards/likes/${id}`, {\r\n\t\t\t\tmethod: 'PUT',\r\n\t\t\t\theaders: this.headers\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.ok) {\r\n\t\t\t\t\treturn res.json()\r\n\t\t\t\t}\r\n\t\t\treturn Promise.reject(`Ошибка: ${res.status}`)\r\n\t\t\t})\r\n\t\t\r\n\t\t}\r\n\r\n\tdeleteLike (id) {\r\n\t\t\treturn fetch(`${this.baseUrl}cards/likes/${id}`, {\r\n\t\t\t\tmethod: 'DELETE',\r\n\t\t\t\theaders: this.headers\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.ok) {\r\n\t\t\t\t\treturn res.json()\r\n\t\t\t\t}\r\n\t\t\treturn Promise.reject(`Ошибка: ${res.status}`)\r\n\t\t\t})\r\n\t\t\r\n\t\t}\r\n\r\n\tchangeLikeCardStatus(id, isLiked) {\r\n\t\tconst res = isLiked ? this.putLike(id) : this.deleteLike(id);\r\n\t\treturn res;\r\n\t\t}\r\n\r\n\r\n}\r\n\r\n\r\nconst api = new Api({\r\n\tbaseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14/',\r\n\theaders: {\r\n\t\tauthorization: 'b5b09145-9ffa-43dc-a8a7-afd53c9e00bd',\r\n\t\t'Content-Type': 'application/json'\r\n\t}\r\n});\r\n\r\n\r\nexport default api;\r\n\r\n","import React, {useEffect} from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\n\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\n\nimport {CurrentUserContext} from '../context/CurrentUserContext';\n\n\nfunction App() {\n\tconst [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n\tconst [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n\tconst [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n\tconst [isDeletePopupOpen, setIsDeletePopupOpen] = React.useState(false);\n\tconst [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n\tconst [selectedCard, setSelectedCard] = React.useState(null);\n\tconst [currentUser, setCurrentUser] = React.useState(null);\n\tconst [cards, setCards] = React.useState([]);\n\n\tconst loadUserInfoandCards = async ()  => {\n\t\ttry{\n\t\t\tconst user = await api.getInitialUser();\n\t\t\tconst data = await api.getInitialCards();\n\t\t\tsetCurrentUser(user);\n\t\t\tsetCards(data);\n\t\t} catch(error) { \n\t\t\tconsole.log(error);\n\t\t} finally { \n\t\t\t// loader false\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tloadUserInfoandCards();\n\t}, []);\n\n\n\tfunction handleEditAvatarClick () {\n\t\tsetIsEditAvatarPopupOpen(true);\n\t}\n\n\tfunction handleEditProfileClick () {\n\t\tsetIsEditProfilePopupOpen(true);\n\t}\n\n\tfunction handleAddPlaceClick () {\n\t\tsetIsAddPlacePopupOpen(true);\n\t}\n\n\tfunction handleDeleteClick () {\n\t\tsetIsDeletePopupOpen(true);\n\t}\n\n\tfunction handleCardClick (card) {\n\t\tsetIsImagePopupOpen(true);\n\t\tsetSelectedCard(card);\n\t}\n\n\tfunction closeAllPopups () {\n\t\t\t\tsetIsEditProfilePopupOpen(false);\n\t\t\t\tsetIsAddPlacePopupOpen(false);\n\t\t\t\tsetIsEditAvatarPopupOpen(false);\n\t\t\t\tsetIsDeletePopupOpen(false);\n\t\t\t\tsetIsImagePopupOpen(false);\n\t\t\t\tsetSelectedCard(null);\n\t}\n\t\n\tfunction handleCardLike (card) {\n\t\t// Снова проверяем, есть ли уже лайк на этой карточке\n\t\tconst isLiked = card.likes.some(i => i._id === currentUser._id);\n\t\t\n\t\t// Отправляем запрос в API и получаем обновлённые данные карточки\n\t\tapi.changeLikeCardStatus(card._id, !isLiked)\n\t\t.then((newCard) => {\n\t\t\t// Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n\t\tconst newCards = cards.map((c) => c._id === card._id ? newCard : c);\n\t\t  // Обновляем стейт\n\t\tsetCards(newCards);\n\t\t});\n\t}\n\n\tfunction handleCardDelete (card) {\n\t\t\tapi.deleteCard(card._id)\n\t\t\t.then(() => {\n\t\t\t\tconst newCards = cards.filter(c => c._id !== card._id);\n\t\t\t\tsetCards(newCards);\n\t\t\t});\n\t}\n\n\tfunction handleUpdateUser (user) {\n\t\tapi.putUserInfo(user)\n\t\t.then((res) => {\n\t\t\tsetCurrentUser(res);\n\t\t\tsetIsEditProfilePopupOpen(false)\n\t\t})\n\t\t.catch(err=>console.log(err));\n\t\t//.finally(() => setIsEditProfilePopupOpen(false));\n\t}\n\n\tfunction handleAddPlaceSubmit (card) {\n\t\tapi.createCard(card)\n\t\t.then((newCard) => {\n\t\t\tsetCards([newCard, ...cards]); \n\t\t\tsetIsAddPlacePopupOpen(false);\n\t\t})\n\t\t.catch(err=>console.log(err));\n\t}\n\n\tfunction handleUpdateAvatar (avatar) {\n\t\tapi.putAvatarInfo(avatar)\n\t\t.then((res) =>{\n\t\t\tsetCurrentUser(res);\n\t\t\tsetIsEditAvatarPopupOpen(false)\n\t\t})\n\t\t.catch(err=>console.log(err));\n\t}\n\n\n\treturn (\n\t<CurrentUserContext.Provider value={currentUser}>\n\t\t<div className=\"App\">\n\t\t\t<div className=\"page\">\n\t\t\t\t<Header />\n\t\t\t\t\t\t<Main\n\t\t\t\t\t\t\tonEditAvatar={handleEditAvatarClick}\n\t\t\t\t\t\t\tonEditProfile ={handleEditProfileClick}\n\t\t\t\t\t\t\tonAddPlace ={handleAddPlaceClick}\n\t\t\t\t\t\t\tonCardClick={handleCardClick}\n\t\t\t\t\t\t\tonDeleteImg = {handleDeleteClick} \n\t\t\t\t\t\t\tcards = {cards}\n\t\t\t\t\t\t\tonCardLike ={handleCardLike}\n\t\t\t\t\t\t\tonCardDelete ={handleCardDelete} />\n\t\t\t\t<Footer />\n\t\t\t</div>\n\n\t\t\t\t<EditProfilePopup  onUpdateUser={handleUpdateUser} isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} />\n\t\t\t\t<AddPlacePopup  onAddPlace ={handleAddPlaceSubmit} isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} />\n\t\t\t\t<EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n\n\t\t\t\t<PopupWithForm \n\t\t\t\t\t\t\tname =\"delete\"\n\t\t\t\t\t\t\ttitle = \"Вы уверены?\"\n\t\t\t\t\t\t\tsubmitText = \"Да\"\n\t\t\t\t\t\t\tisOpen = {isDeletePopupOpen}\n\t\t\t\t\t\t\tonClose = {closeAllPopups} />\n\n\t\t\t\t<ImagePopup \n\t\t\t\t\t\tisOpen = {isImagePopupOpen}\n\t\t\t\t\t\tonClose = {closeAllPopups}\n\t\t\t\t\t\tcard = {selectedCard} />\n\n\t\t</div>\n\t</CurrentUserContext.Provider>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}